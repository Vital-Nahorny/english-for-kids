(()=>{"use strict";(()=>{function t(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var a=[],e=!0,o=!1,i=void 0;try{for(var n,s=t[Symbol.iterator]();!(e=(n=s.next()).done)&&(a.push(n.value),!r||a.length!==r);e=!0);}catch(t){o=!0,i=t}finally{try{e||null==s.return||s.return()}finally{if(o)throw i}}return a}}(t,r)||e(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,r){if(t){if("string"==typeof t)return o(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(t,r):void 0}}function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,e=new Array(r);a<r;a++)e[a]=t[a];return e}function i(e,o,i,n){var s,c=null;try{c=document.createElement(e)}catch(t){throw new Error("Unable to create HTMLElement! Give a proper tag name")}o&&(s=c.classList).add.apply(s,a(o.split(" "))),i&&Array.isArray(i)?i.forEach((function(t){return t&&c.appendChild(t)})):i&&"object"===r(i)?c.appendChild(i):i&&"string"==typeof i&&(c.innerHTML=i),n&&n.appendChild(c);for(var d=arguments.length,l=new Array(d>4?d-4:0),u=4;u<d;u++)l[u-4]=arguments[u];return l.length&&l.forEach((function(r){var a=t(r,2),e=a[0],o=a[1];""===o&&c.setAttribute(e,""),e.match(/value|id|placeholder|cols|rows|autocorrect|spellcheck|src|alt/)?c.setAttribute(e,o):c.dataset[e]=o})),c}var n=function t(r){var a=r.word,e=r.translation,o=r.image,n=r.audioSrc;!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.word=a,this.translation=e,this.image=o,this.audioSrc=n,this.frontHeader=i("div","card-header","".concat(this.word)),this.backHeader=i("div","card-header","".concat(this.translation)),this.btnRotate=i("div","btn-rotate"),this.btnRotate.style.backgroundImage="url(img/rotate.svg)",this.front=i("div","front",[this.frontHeader,this.btnRotate]),this.front.style.backgroundImage="url(".concat(o,")"),this.back=i("div","back",this.backHeader),this.back.style.backgroundImage="url(".concat(o,")"),this.div=i("div","card",[this.front,this.back]),this.container=i("div","card-container",this.div)};const s=[["Action (set A)","Action (set B)","Animal (set A)","Animal (set B)","Clothes","Emotions","Food","Transport"],[{category:"Action (set A)",word:"cry",translation:"плакать",image:"img/cry.jpg",audioSrc:"audio/cry.mp3"},{category:"Action (set A)",word:"dance",translation:"танцевать",image:"img/dance.jpg",audioSrc:"audio/dance.mp3"},{category:"Action (set A)",word:"dive",translation:"нырять",image:"img/dive.jpg",audioSrc:"audio/dive.mp3"},{category:"Action (set A)",word:"draw",translation:"рисовать",image:"img/draw.jpg",audioSrc:"audio/draw.mp3"},{category:"Action (set A)",word:"fish",translation:"ловить рыбу",image:"img/fish.jpg",audioSrc:"audio/fish.mp3"},{category:"Action (set A)",word:"fly",translation:"летать",image:"img/fly.jpg",audioSrc:"audio/fly.mp3"},{category:"Action (set A)",word:"hug",translation:"обнимать",image:"img/hug.jpg",audioSrc:"audio/hug.mp3"},{category:"Action (set A)",word:"jump",translation:"прыгать",image:"img/jump.jpg",audioSrc:"audio/jump.mp3"}],[{category:"Action (set B)",word:"open",translation:"открывать",image:"img/open.jpg",audioSrc:"audio/open.mp3"},{category:"Action (set B)",word:"play",translation:"играть",image:"img/play.jpg",audioSrc:"audio/play.mp3"},{category:"Action (set B)",word:"point",translation:"указывать",image:"img/point.jpg",audioSrc:"audio/point.mp3"},{category:"Action (set B)",word:"ride",translation:"ездить",image:"img/ride.jpg",audioSrc:"audio/ride.mp3"},{category:"Action (set B)",word:"run",translation:"бегать",image:"img/run.jpg",audioSrc:"audio/run.mp3"},{category:"Action (set B)",word:"sing",translation:"петь",image:"img/sing.jpg",audioSrc:"audio/sing.mp3"},{category:"Action (set B)",word:"skip",translation:"пропускать, прыгать",image:"img/skip.jpg",audioSrc:"audio/skip.mp3"},{category:"Action (set B)",word:"swim",translation:"плавать",image:"img/swim.jpg",audioSrc:"audio/swim.mp3"}],[{category:"Animal (set A)",word:"cat",translation:"кот",image:"img/cat.jpg",audioSrc:"audio/cat.mp3"},{category:"Animal (set A)",word:"chick",translation:"цыплёнок",image:"img/chick.jpg",audioSrc:"audio/chick.mp3"},{category:"Animal (set A)",word:"chicken",translation:"курица",image:"img/chicken.jpg",audioSrc:"audio/chicken.mp3"},{category:"Animal (set A)",word:"dog",translation:"собака",image:"img/dog.jpg",audioSrc:"audio/dog.mp3"},{category:"Animal (set A)",word:"horse",translation:"лошадь",image:"img/horse.jpg",audioSrc:"audio/horse.mp3"},{category:"Animal (set A)",word:"pig",translation:"свинья",image:"img/pig.jpg",audioSrc:"audio/pig.mp3"},{category:"Animal (set A)",word:"rabbit",translation:"кролик",image:"img/rabbit.jpg",audioSrc:"audio/rabbit.mp3"},{category:"Animal (set A)",word:"sheep",translation:"овца",image:"img/sheep.jpg",audioSrc:"audio/sheep.mp3"}],[{category:"Animal (set B)",word:"bird",translation:"птица",image:"img/bird.jpg",audioSrc:"audio/bird.mp3"},{category:"Animal (set B)",word:"fish",translation:"рыба",image:"img/fish1.jpg",audioSrc:"audio/fish.mp3"},{category:"Animal (set B)",word:"frog",translation:"жаба",image:"img/frog.jpg",audioSrc:"audio/frog.mp3"},{category:"Animal (set B)",word:"giraffe",translation:"жирафа",image:"img/giraffe.jpg",audioSrc:"audio/giraffe.mp3"},{category:"Animal (set B)",word:"lion",translation:"лев",image:"img/lion.jpg",audioSrc:"audio/lion.mp3"},{category:"Animal (set B)",word:"mouse",translation:"мышь",image:"img/mouse.jpg",audioSrc:"audio/mouse.mp3"},{category:"Animal (set B)",word:"turtle",translation:"черепаха",image:"img/turtle.jpg",audioSrc:"audio/turtle.mp3"},{category:"Animal (set B)",word:"dolphin",translation:"дельфин",image:"img/dolphin.jpg",audioSrc:"audio/dolphin.mp3"}],[{category:"Clothes",word:"skirt",translation:"юбка",image:"img/skirt.jpg",audioSrc:"audio/skirt.mp3"},{category:"Clothes",word:"pants",translation:"брюки",image:"img/pants.jpg",audioSrc:"audio/pants.mp3"},{category:"Clothes",word:"blouse",translation:"блузка",image:"img/blouse.jpg",audioSrc:"audio/blouse.mp3"},{category:"Clothes",word:"dress",translation:"платье",image:"img/dress.jpg",audioSrc:"audio/dress.mp3"},{category:"Clothes",word:"boot",translation:"ботинок",image:"img/boot.jpg",audioSrc:"audio/boot.mp3"},{category:"Clothes",word:"shirt",translation:"рубашка",image:"img/shirt.jpg",audioSrc:"audio/shirt.mp3"},{category:"Clothes",word:"coat",translation:"пальто",image:"img/coat.jpg",audioSrc:"audio/coat.mp3"},{category:"Clothes",word:"shoe",translation:"туфли",image:"img/shoe.jpg",audioSrc:"audio/shoe.mp3"}],[{category:"Emotions",word:"sad",translation:"грустный",image:"img/sad.jpg",audioSrc:"audio/sad.mp3"},{category:"Emotions",word:"angry",translation:"сердитый",image:"img/angry.jpg",audioSrc:"audio/angry.mp3"},{category:"Emotions",word:"happy",translation:"счастливый",image:"img/happy.jpg",audioSrc:"audio/happy.mp3"},{category:"Emotions",word:"tired",translation:"уставший",image:"img/tired.jpg",audioSrc:"audio/tired.mp3"},{category:"Emotions",word:"surprised",translation:"удивлённый",image:"img/surprised.jpg",audioSrc:"audio/surprised.mp3"},{category:"Emotions",word:"scared",translation:"испуганный",image:"img/scared.jpg",audioSrc:"audio/scared.mp3"},{category:"Emotions",word:"smile",translation:"улыбка",image:"img/smile.jpg",audioSrc:"audio/smile.mp3"},{category:"Emotions",word:"laugh",translation:"смех",image:"img/laugh.jpg",audioSrc:"audio/laugh.mp3"}],[{category:"Food",word:"apple",translation:"яблоко",image:"img/apple.jpg",audioSrc:"audio/apple.mp3"},{category:"Food",word:"milk",translation:"молоко",image:"img/milk.jpg",audioSrc:"audio/milk.mp3"},{category:"Food",word:"banana",translation:"банан",image:"img/banana.jpg",audioSrc:"audio/banana.mp3"},{category:"Food",word:"bread",translation:"хлеб",image:"img/bread.jpg",audioSrc:"audio/bread.mp3"},{category:"Food",word:"cake",translation:"торт",image:"img/cake.jpg",audioSrc:"audio/cake.mp3"},{category:"Food",word:"cheese",translation:"сыр",image:"img/cheese.jpg",audioSrc:"audio/cheese.mp3"},{category:"Food",word:"ice cream",translation:"мороженое",image:"img/icecream.jpg",audioSrc:"audio/icecream.mp3"},{category:"Food",word:"orange",translation:"апельсин",image:"img/orange.jpg",audioSrc:"audio/orange.mp3"}],[{category:"Transport",word:"airplane",translation:"самолёт",image:"img/airplane.jpg",audioSrc:"audio/airplane.mp3"},{category:"Transport",word:"bicycle",translation:"велосипед",image:"img/bicycle.jpg",audioSrc:"audio/bicycle.mp3"},{category:"Transport",word:"bus",translation:"автобус",image:"img/bus.jpg",audioSrc:"audio/bus.mp3"},{category:"Transport",word:"car",translation:"машина",image:"img/car.jpg",audioSrc:"audio/car.mp3"},{category:"Transport",word:"motorcycle",translation:"мотоцикл",image:"img/motorcycle.jpg",audioSrc:"audio/motorcycle.mp3"},{category:"Transport",word:"ship",translation:"корабль",image:"img/ship.jpg",audioSrc:"audio/ship.mp3"},{category:"Transport",word:"train",translation:"поезд",image:"img/train.jpg",audioSrc:"audio/train.mp3"},{category:"Transport",word:"truck",translation:"грузовик",image:"img/truck.jpg",audioSrc:"audio/truck.mp3"}]];function c(t){var r=new Audio;r.src="./audio/".concat(t,".mp3"),r.play()}function d(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return l(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,e=new Array(r);a<r;a++)e[a]=t[a];return e}function u(t,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function g(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var m=document.querySelector(".burger__list"),p=document.querySelector(".main-page"),y=document.querySelector(".category-page"),h=document.querySelector("#myswitcher"),f=document.querySelector(".score"),v=document.querySelector(".btns-container"),b=function(){function t(){var r=this;!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,"generateMainPage",(function(){r.clearPage(),r.gameIsOn&&r.endGame(),s[0].forEach((function(t,r){i("div","main-card",i("div",null,t),p,["id","".concat(r)]).style.backgroundImage="url(img/".concat(r,".jpg)")})),r.menuItemStatus()})),g(this,"openMenuCard",(function(t){t.stopPropagation&&t.stopPropagation();var a=t.target.closest(".main-card");if(a){r.currentCategory=a.firstElementChild.textContent;var e=+a.id;r.clearPage(),r.generateCategoryPage(e)}})),g(this,"openMenuItem",(function(t){t.stopPropagation&&t.stopPropagation();var a=t.target.closest(".burger__item");if(a)if(r.currentCategory=a.textContent,"Main menu"===a.textContent)r.generateMainPage();else if("Statistics"===a.textContent)r.generateStatisticPage();else{var e=s[0].indexOf(a.textContent);r.generateCategoryPage(e)}})),g(this,"rotateCard",(function(t){t.stopPropagation&&t.stopPropagation();var a=t.target.closest(".btn-rotate");if(a){var e=t.target.closest(".card"),o=a.previousSibling.textContent;r.statisticArr.find((function(t){return t.word===o})).trained+=1,e.classList.add("rotated"),e.addEventListener("mouseleave",(function(){e.classList.remove("rotated")}))}})),g(this,"cardEventHandler",(function(t){if(t.stopPropagation&&t.stopPropagation(),"front"===t.target.classList.value){var a,e=t.target,o=e.firstElementChild.textContent;if(r.isPlay){var n=e.closest(".card"),s=r.statisticArr.find((function(t){return t.word===r.playWords[0]}));if(!n.classList.contains("card-checked")&&r.gameIsOn)if(o===r.playWords[0]){r.score.correct+=1,s.correct+=1;var d=s.correct+s.incorrect;if(s.percent=Math.floor(100*s.correct/d),f.prepend(i("div","star-correct")),n.classList.toggle("card-checked"),r.playWords.shift(r.playWords[0]),(a=new Audio).src="./audio/correct.mp3",a.play(),0===r.playWords.length)if(setTimeout(r.generateMainPage,3e3),0===r.score.error)r.endGame(),function(){var t=new Audio;t.src="./audio/success.mp3",t.play()}(),i("div","win",null,y);else{var l=r.score.error;r.endGame(),function(){var t=new Audio;t.src="./audio/failure.mp3",t.play()}(),i("div","failure","You made ".concat(l," errors."),y)}else setTimeout(c,500,r.playWords[0])}else{r.score.error+=1,s.incorrect+=1;var u=s.correct+s.incorrect;s.percent=Math.floor(100*s.correct/u),f.prepend(i("div","star-wrong")),function(){var t=new Audio;t.src="./audio/error.mp3",t.play()}()}}else c(o),r.statisticArr.find((function(t){return t.word===o})).trained+=1;localStorage.statistic=JSON.stringify(r.statisticArr)}})),g(this,"endGame",(function(){r.gameIsOn=!r.gameIsOn,r.score.correct=0,r.score.error=0,r.playWords=[],r.categoryCards=[],f.innerHTML="",y.innerHTML="",v.innerHTML=""})),g(this,"btnEventHandler",(function(t){t.stopPropagation&&t.stopPropagation(),"btn-start"===t.target.classList.value&&r.gameStart(),"btn-repeat"===t.target.classList.value&&c(r.playWords[0])})),this.isPlay=!1,this.gameIsOn=!1,this.categoryCards=[],this.playWords=[],this.currentCategory=null,this.menuItems=null,this.score={correct:0,error:0},this.statisticArr=null,this.currSortColl=null,this.isSortUp=!0,this.columnNames=["Categories","Words","Translation","Trained","Correct","Incorrect","%"]}var r,a;return r=t,(a=[{key:"init",value:function(){var t=this;return this.menuItems=document.querySelectorAll(".burger__item"),m.addEventListener("click",this.openMenuItem),p.addEventListener("click",this.openMenuCard),y.addEventListener("click",this.rotateCard),y.addEventListener("click",this.cardEventHandler),v.addEventListener("click",this.btnEventHandler),h.addEventListener("change",(function(){t.gameMode()})),this}},{key:"generateCategoryPage",value:function(t){var r=this;this.clearPage(),this.gameIsOn&&this.endGame(),s[t+1].sort((function(){return Math.random()-.5})).forEach((function(t){var a=new n(t);r.categoryCards.push(a),r.playWords.push(a.word),r.isPlay&&a.div.classList.toggle("card-cover"),y.append(a.container)})),this.isPlay&&i("button","btn-start",null,v,["type","button"]),this.menuItemStatus()}},{key:"generateStatisticPage",value:function(){var t=this;this.clearPage();var r=i("div","stat-buttons",null,p),a=i("button","btn-reset","Reset",r,["type","button"]);i("button","btn-repeat-words","Repeat difficult words",r,["type","button"]).addEventListener("click",(function(){return t.generateRepeatPage()})),a.addEventListener("click",(function(){localStorage.statistic&&localStorage.removeItem("statistic"),t.loadStatistic(),t.generateStatisticPage()}));var e=i("div","table-wrapper",null,p),o=i("table","table-stat",null,e,["id","table"]),n=i("thead",null,null,o),s=i("tr",null,null,n);this.columnNames.forEach((function(t){i("th",null,t,s)}));var c=i("tbody",null,null,o);this.statisticArr.forEach((function(t){var r=Object.values(t);r.splice(3,2);var a=i("tr",null,null,c);r.forEach((function(t){i("td",null,String(t),a)}))})),n.addEventListener("click",(function(r){return t.sortRows(r)})),this.menuItemStatus()}},{key:"generateRepeatPage",value:function(){var t=this,r=this.statisticArr.filter((function(t){return t.percent>0&&t.percent<100}));r.sort((function(t,r){return t.percent-r.percent})),r=r.slice(0,8),this.clearPage(),0===r.length?(i("div","message","No cards for repeat.",y),setTimeout(this.generateMainPage,2e3)):r.forEach((function(r){var a=new n(r);t.categoryCards.push(a),t.playWords.push(a.word),t.isPlay&&a.div.classList.toggle("card-cover"),y.append(a.container)})),this.isPlay&&i("button","btn-start",null,v,["type","button"])}},{key:"sortRows",value:function(t){var r;t.stopPropagation&&t.stopPropagation();var a=t.target.closest("th"),e=document.querySelectorAll("th"),o=a.cellIndex,i=document.querySelector("#table"),n=Array.from(i.rows).slice(1);this.currSortColl===o&&(this.isSortUp=!this.isSortUp),e.forEach((function(t){t.classList.remove("sort-up","sort-down")})),this.isSortUp?(o>=3?n.sort((function(t,r){return r.cells[o].innerHTML-t.cells[o].innerHTML})):n.sort((function(t,r){return t.cells[o].innerHTML>r.cells[o].innerHTML?1:-1})),a.classList.add("sort-down")):(o>=3?n.sort((function(t,r){return t.cells[o].innerHTML-r.cells[o].innerHTML})):n.sort((function(t,r){return t.cells[o].innerHTML<r.cells[o].innerHTML?1:-1})),a.classList.add("sort-up")),this.currSortColl=o,(r=i.tBodies[0]).append.apply(r,d(n))}},{key:"gameMode",value:function(){this.isPlay=!this.isPlay,this.categoryCards.length>0&&(this.categoryCards.forEach((function(t){t.div.classList.toggle("card-cover")})),this.isPlay?i("button","btn-start",null,v,["type","button"]):(v.innerHTML="",f.innerHTML=""),this.gameIsOn&&(this.endGame(),this.generateMainPage()))}},{key:"gameStart",value:function(){0!==this.categoryCards.length&&(this.gameIsOn=!this.gameIsOn,v.innerHTML="",i("button","btn-repeat",null,v,["type","button"]),this.playWords.sort((function(){return Math.random()-.5})),c(this.playWords[0]))}},{key:"loadStatistic",value:function(){var t;localStorage.statistic?this.statisticArr=JSON.parse(localStorage.statistic):(this.statisticArr=(t=[]).concat.apply(t,d(s.slice(1))),this.statisticArr.forEach((function(t){var r=t;r.trained=0,r.correct=0,r.incorrect=0,r.percent=0})))}},{key:"clearPage",value:function(){this.categoryCards=[],this.playWords=[],p.innerHTML="",y.innerHTML="",v.innerHTML=""}},{key:"menuItemStatus",value:function(){var t=this;this.menuItems.forEach((function(r){r.textContent===t.currentCategory?r.classList.add("active"):r.classList.remove("active")}))}}])&&u(r.prototype,a),t}();window.addEventListener("DOMContentLoaded",(function(){var t,r,a,e,o,i;t=document.querySelector(".burger__overlay"),r=document.querySelector(".header__burger"),a=document.querySelector(".burger__menu"),e=document.querySelector("body"),o=document.querySelectorAll(".burger__item"),i=document.querySelector(".header__burger-icon"),r.addEventListener("click",(function(){i.classList.toggle("is-active"),a.classList.toggle("open"),a.classList.toggle("hide"),t.classList.toggle("unvisible"),e.classList.toggle("overflow")})),t.addEventListener("click",(function(){r.click()})),o.forEach((function(t){return t.addEventListener("click",(function(){r.click()}))}));var n=new b;n.init().generateMainPage(),n.loadStatistic()}))})()})();